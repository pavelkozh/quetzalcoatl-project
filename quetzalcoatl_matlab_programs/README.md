# Программы MATLAB для получения информации о работе системы нижнего уровня и передачи команд
  
## Назначение

Данные программы необходимы для получения и сохранения в виде mat-файлов основной информации о Газели:

- Положение педали газа
- Активный момент двигателя
- Обороты двигателя
- Линейная скорость автомобиля

С помощью приложения GUI можно также отправлять команды на микроконтроллер, чтобы проводить различные тесты. Все данные, пришедшие с микроконтроллера, сохраняются в папке *logs*.

## Предподготовка на стороне микроконтроллера

Синхронизация приема и передачи осуществлена следующим образом:

1) В файле теста (**test_something.c**) перед бесконечным циклом должна стоять функция *sdGet*, которая блокирует выполнение программы, пока не получит какой-либо байт данных по последовательному порту.

2) В бесконечном цикле программы должны отправляться требуемые величины по последовательному порту. При этом порядок передачи величин должен быть согласован с порядком приема величин в программах matlab. 

При желании посылаемые величины можно поменять на другие, но при этом потребуется также внести изменения и в программах matlab.

## Скрипт running_plot.m

Данный скрипт предназначен для вывода графиков требуемых величин в режиме реального времени с последующим сохранением данных в виде mat-файлов. Окончание приема данных происходит при нажатии клавиши **f** на клавиатуре при активной фигуре в матлаб. Через данный скрипт нельзя посылать команды

### Графическое приложение app2.mlapp

Данное приложение предназначено как для приема и логирования данных, так и для отправки команд на микроконтроллер. Для начала нужно выбрать нужный COM-порт, затем ввести имя лог-файла и нажать кнопку Connect. При желании можно выводить графики в реальном времени, однако это сильно тормозит работу программы. Для сохранения логов нужно закрыть приложение (крестик в углу окна).
